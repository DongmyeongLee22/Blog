---
title: 아이템 42. 익명 클래스보다는 람다를 사용하라
date: 2020-05-24 01:24
img: default.png
tags:
    - Java
---
- 자바는 함수 객체를 표현하기 위해 익명 클래스를 사용하였다.
- 익명 클래스는 코드가 너무 길기 때문에 함수형 프로그래밍에 적합하지 않았다.
- 자바 8부터 추사 메서드 하나를 가지는 인터페이스는 함수형 인터페이스로 람다식을 사용해 만들 수 있게 되었다.
- 람다식을 사용하면 보통 반환값 매개변수 타입을 생략하게 된다. 이러한 타입은 대부분 컴파일러가 알아서 추론해주고 필요시 직접 기입하면 된다.

> 제네릭을 잘 활용해야 하는 이유 중 하나가 람다식을 사용할 때 컴파일러가 람다의 타입을 제네릭을 통해 주로 추론하게 되는 이유가 있다.

```java
public enum Operation {
  PLUS((x, y) -> x + y),
  MINUS((x, y) -> x - y),
  TIMES((x, y) -> x * y),
  DIVIDE((x, y) -> x / y);

  private final DoubleBinaryOperator op;

  Operation(DoubleBinaryOperator op) {
    this.op = op;
  }

  public double oper(double x, double y) {
    return op.applyAsDouble(x, y);
  }
}
```
- 람다식을 활용하면 item 34에서 사용했던 Operation enum을 훨씬 더 짧고 간결하게 표현할 수 있다.

#### 람다가 무조건 옳을까?
- 위의 예시를 보면 더 이상 상수별 클래스 메서드를 사용할 이유가 없다고 느껴질 수 도 있다.
- 하지만 람다는 메서드, 클래스와 달리 **이름이 없고 문서화도 못한다.**
- **따라서 코드 자체로 동작히 명확히 설명되지 않거나 코드 줄수가 많아지면 람다를 쓰지 말아야 한다.**
- 람다는 한줄일 때 가장좋고 길어야 세줄 안에 끝내는게 좋다.

#### 람다대신 익명클래스를 써야 할 때
- 람다가 생기고 익명클래스의 사용처는 많이 적어졌지만 여전히 필요한 몇가지 경우가 있다.
- 먼저 람다는 추상 메서드가 하나만 존재하는 함수형 인터페이스에서만 사용할 수 있다.
- 추상 메서드가 여러개이거나 추상 클래스의 경우 람다는 불가능하다.
- 그리고 this가 존재하지 않기 때문에 this가 필요할 경우 람다를 사용할 수 없다.

#### 주의 사항
- 람다는 익명 클래스처럼 직렬화 형태가 구현 혹은 가상머신 별로 다를 수 있다.
- 그러므로 **람다를 직렬화하는 일은 극히 삼가야 한다.**

