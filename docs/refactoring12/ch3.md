---
title: Chapter 3. 코드에서 나는 악취
date: 2020-05-24 01:25
    - JavaScript
    - Refactoring
---

# Chapter 3. 코드에서 나는 악취
- 리팩터링을 언제 시작하고 언제 그만할지를 판단하는 일은 리팩터링의 작동 원리를 아는 것 못지않게 중요하다.
- 리팩터링을 언제 멈춰야 하는지 정확한 기준을 제시하진 않고 리랙터링하면 해결할 수 있는 문제들을 제시한다.

#### 1) 기이한 이름
- 함수, 모듈, 변수, 클래스 등은 이름만 보고도 각각이 무슨일을 하고 어떻게 사용해야 하는지 명확히 알 수 있도록 하여야 한다.
- 이름이 잘 떠오르지 않는다면 설계에 근본적인 문제가 있을 수 있다. 그러므로 이름을 잘 정리하면 코드가 훨씬 간결해질 때가 많다.

#### 2) 중복 코드
- 가장 간단한 예로는 한 클래스의 두 메서드가 같은 표현식을 사용할 때가 있다.
- **함수 추출하기** 기법을 이용하여 메서드를 추출하면 된다.
- 코드가 비슷하지만 완전 같지 않으면 **문장 슬라이스하기**를 이용해 함수 추출을 시도할 수 있다.
- 파생된 서브 클래스들에 코드가 중복되어 있다면 **메서드 올리기**를 적용해 부모로 옮길 수 있다.

#### 3) 긴 함수
- 함수 이름을 잘 지어두면 본문 코드를 볼 필요가 없다.
- 함수를 짧게 만드는 작업의 99%는 **함수 추출하기**이다.
- 함수의 파라미터가 많이 있다면 오히려 더 복잡해질 수 있는데 이때는 **임시 변수를 질의 함수로 바꾸기**, **매개변수 객체 만들기**, **객체 통째로 넘기기**등을 활용하자.

#### 4) 긴 매개변수 목록
- 다른 매개변수에서 값을 얻어올 수 있는 매개변수는 **매개변수를 질의 함수로 바꾸기**를 이용하여 제거할 수 있다.
- **객체 통쨰로 넘기기, 매개변수 객체 만들기**로 하나로 묶어버려 매개변수를 줄일 수 있다.
- 함수의 동작 방식을 정하는 플래그 역할의 매개변수는 **플래그 인수 제거하기**로 제거한다.

#### 5) 전역 데이터
- 전역 데이터는 디버깅이 매우 어렵고 접근할 수 있는 대상들이 너무 많다.
- 그러므로 전역 데이터는 캡슐화하여 접근을 통제시키는게 좋다.

#### 6) 가변 데이터
- **변수 캡슐화, 변수 쪼개기, 질의 함수와 변경 함수 분리**등을 통해 가변 데이터를 보호하자.

#### 8) 산탄총 수술

### 10) 데이터 뭉치
- 서로 연관된 데이터 뭉치들을 찾아 클래수로 추출하여 이를 이용하자.

> 주석을 남겨야겠다는 생각이 들면, 가장 먼저 주석이 필요 없는 코드를 리팩터링 해본다.